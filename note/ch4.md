# chapter 4 문서 관리 시스템 

### 📌 `리스코프 치환 원칙(LSP)` `강한 형식의 원칙` `확장과 재사용`

---

<br/>

---

> **문서 관리 시스템 요구 사항** → 리포트, 우편물, 이미지 등 다른 종류의 문서에서 특정 정보를 포함하는 문서를 포함하는 문서를 검색하여 찾기를 원함

## # 설계 작업

### # 임포터
> 다양한 종류의 문서를 임포트하는 것 = 문서 관리 시스템의 핵심 기능

- 다양한 문서를 임포트하는 클래스로 분리하여 각각의 임포트 동작을 따로 처리하도록,
- `Importer` 인터페이스 정의 → 다양한 종류의 문서 임포트를 지원

```java
import java.io.IOException;

interface Importer {
    Document importFile(File file) throws IOException;
}
```

### # 강한 형식의 원칙
- 강한 형식을 이용하면 데이터의 사용 방법을 규제할 수 있음 
- 도메인 클래스를 이용하면 개념에 이름을 붙이고 수행할 수 있는 동작과 값을 제한하므로 발경성을 개선하고 버그 발생 범위를 줄일 수 있음
- <details markdown="1">
  <summary> ex. </summary>
    다양한 문서를 임포트하는 부분을 Importer 인터페이스로 분리, Document 클래스(불변)는 클래스를 생성한 다음에는 클래스의 속성을 바꿀 수 없다. <br/>
    Importer 구현이 문서를 만들면 이후에 수정할 수 없다. 따라서 Document의 속성에서 오류가 발생하면 Importer 구현을 확인하면 되므로 오류가 발 <br/>
    생한 원인을 좁힐 수 있다. Document의 불변성 덕분에 안전하게 Document로 색인을 만들거나 Document 정보를 캐시할 수 있다.
  </details>

<br/>

---

## # 리스코프 치환 원칙
> _**LSP(Single Responsibility Principle)** : 상위 타입의 객체를 하위 타입의 객체로 치환해도 상위 타입을 사용하는 프로그램은 정상적으로 동작해야 한다._

- 쉽게 말해, 특정 메서드가 상위 타입을 인자로 사용한다고 할 때, 그 타입의 하위 타입도 문제 없이 정상적으로 작동을 해야 한다는 것
- _**LSP q(x)** → T 형식의 x객체를 증명할 수 있는 공식, S 형식의 객체 y가 있고 S가 T의 하위형식이라면 q(y)는 참_

#

### # 하위형식에서 선행조건을 더할 수 없음 
- 선행조건은 어떤 코드가 동작하는 조건을 결정한다.
- 우리는 구현한 코드가 어떻게든 실행될 것이라고 가정할 수 없다
- LSP란, 부모가 지정한 것보다 더 많은 선행조건을 요구할 수 없음을 의미한다.

### # 하위형식에서 후행조건을 악화시킬 수 없음
- 후행조건은 어떤 코드를 실행한 다음에 만족해야 하는 규칙이다.
- 부모가 부작용을 포함하거나 어떤 값을 반환한다면 자식도 그래야 한다.

### # 슈퍼형식의 불변자는 하위형식에서 보존됨 
- (불변자란 항상 변하지 않는 어떤 것)
- 상속 관계의 부모와 자식 클래스가 있을 때, 부모 클래스에서 유지되는 모두 불변자는 자식 클래스에서도 유지되어야 한다.

### # 히스토리 규칙
- 기본적으로 자식 클래스는 부모가 허용하지 않은 상태 변화를 허용하지 않아야 한다.
- 부모 클래스(불변)를 인스턴스화한 다음에는 어떤 속성도 삭제, 추가, 변경할 수 없다.

<br/>

---

## # 기존 코드 확장과 재사용
> 코드를 재사용하기 위한 세 가지 방법


### # 유틸리티 클래스 사용 
- 여러 임포트에서 공유해야 하는 기능을 이 유틸리티 클래스에 구현, 여러 정적 메서드 포함 
- 유틸리티 클래스는 단순하지만 객체지향 프로그래밍의 지향점과 거리가 멀다. 
- 유틸리티 클래스는 여러 의무를 담당하는 갓 클래스의 모양을 가지게 된다. 

### # 상속 사용
- 상속을 이용하여 동작과 개념을 연결할 수 있다.
- 실제 관계를 제대로 반영하지 않은 상속은 쉽게 깨질 수 있다는 점이 문제이다.


### # 도메인 클래 사용
- 기본 개념을 모델링한 다음, 기본 개념이 제공하는 메서드를 호출하여 다양한 임포터를 만든다.
- 도메인 클래스를 이용하면 상속 처럼 쉽게 깨질 수 있는 계층을 만들지 않으면서도 코드를 재사용할 수 있다.

<br/>

---

## # 테스트 위생 